<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>抽籤分組助手 - 專業、簡單、高效</title>
    <!-- 引入 Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Noto+Sans+TC:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">
        <header>
            <h1>抽籤分組助手</h1>
            <p>簡單快速的名單管理、隨機抽籤與自動分組工具</p>
        </header>

        <div class="grid">
            <!-- 左側：名單管理 -->
            <aside>
                <div class="card">
                    <div class="card-title">
                        <span>名單輸入</span>
                        <span class="stats" id="totalCount">共 0 人</span>
                    </div>
                    <textarea id="nameInput" placeholder="請在此輸入姓名清單，每一行一個姓名..."></textarea>

                    <div class="btn-group">
                        <button class="btn-outline" onclick="app.importMock()">🍭 模擬名單</button>
                        <button class="btn-danger" onclick="app.resetList()">🗑️ 清空</button>
                        <button class="btn-success" id="removeDupBtn" class="hide" onclick="app.removeDuplicates()">✨
                            移除重複</button>
                    </div>

                    <div class="card-title" style="margin-top: 25px; border-bottom: none;">
                        <span>名單預覽</span>
                    </div>
                    <div class="list-preview" id="listPreview">
                        <div style="color: #94a3b8; text-align: center; margin-top: 20px;">尚無資料</div>
                    </div>
                </div>
            </aside>

            <!-- 右側：功能區 -->
            <main>
                <!-- 功能一：隨機抽籤 -->
                <section class="card">
                    <div class="card-title">
                        <span>🎯 名單抽籤</span>
                        <span class="stats" id="remainingDraw">剩餘 0 人</span>
                    </div>

                    <div class="draw-controls">
                        <div class="form-item">
                            <label>每次抽取人數</label>
                            <input type="number" id="drawCount" value="1" min="1">
                        </div>
                        <div class="form-item"
                            style="flex-direction: row; align-items: center; gap: 10px; margin-top: 20px;">
                            <input type="checkbox" id="allowRepeat">
                            <label for="allowRepeat" style="margin-top: 0; cursor: pointer;">允許重複抽取</label>
                        </div>
                    </div>

                    <div class="slot-machine" id="slotMachine">準備開始...</div>

                    <div class="btn-group">
                        <button class="btn-primary" id="drawBtn" onclick="app.startDraw()">🚀 開始抽籤</button>
                        <button class="btn-outline" onclick="app.resetDrawResults()">🔄 重新抽籤</button>
                    </div>

                    <div class="result-container" id="drawResults">
                        <!-- 抽籤結果放置處 -->
                    </div>
                </section>

                <!-- 功能二：自動分組 -->
                <section class="card">
                    <div class="card-title">
                        <span>👥 自動分組</span>
                    </div>

                    <div class="group-controls">
                        <div class="form-item">
                            <label>每組人數</label>
                            <input type="number" id="groupSize" value="3" min="2">
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn-primary" onclick="app.startGrouping()">🧩 即刻分組</button>
                        <button class="btn-outline" onclick="app.exportCSV()">📥 下載 CSV</button>
                        <button class="btn-outline" onclick="app.resetGroups()">🔄 重新分組</button>
                    </div>

                    <div class="group-grid" id="groupResults">
                        <!-- 分組結果放置處 -->
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- 清空確認 Modal -->
    <div class="modal-overlay" id="clearConfirmModal">
        <div class="modal">
            <div class="modal-header">⚠️ 確認清空</div>
            <div class="modal-body">
                確定要清空所有名單嗎？此動作將會清除所有目前的輸入與紀錄，且無法復原。
            </div>
            <div class="modal-footer">
                <button class="btn-outline" onclick="app.closeModal('clearConfirmModal')">取消</button>
                <button class="btn-danger" onclick="app.confirmClearList()">確定清空</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>

</body>

</html>